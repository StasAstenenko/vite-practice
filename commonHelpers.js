var P=(t,r,e)=>{if(!r.has(t))throw TypeError("Cannot "+e)};var s=(t,r,e)=>(P(t,r,"read from private field"),e?e.call(t):r.get(t)),l=(t,r,e)=>{if(r.has(t))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(t):r.set(t,e)},v=(t,r,e,o)=>(P(t,r,"write to private field"),o?o.call(t,e):r.set(t,e),e);import"./assets/styles-54b78044.js";import{a as L,P as S,i as a}from"./assets/vendor-6b9f6847.js";var c,p,u,g;class _{constructor(){l(this,c,"https://api.unsplash.com");l(this,p,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");l(this,u,"");l(this,g,new URLSearchParams({per_page:12,orientation:"portrait",client_id:s(this,p)}))}async getPopularPhotos(r){const e=`${s(this,c)}/search/photos?page=${r}&query=popular&${s(this,g)}`;try{const{data:o}=await L(e);return o}catch(o){console.log(o)}}async searchPhoto(r){const e=`${s(this,c)}/search/photos?page=${r}&query=${s(this,u)}&${s(this,g)}`;try{const{data:o}=await L(e);return o}catch(o){console.log(o)}}set query(r){v(this,u,r)}}c=new WeakMap,p=new WeakMap,u=new WeakMap,g=new WeakMap;function m(t){return t.map(({id:r,urls:{small:e},alt_description:o})=>`<li id="${r}" class="gallery__item"><img src="${e}" alt="${o}"></li>`).join("")}const i=new _,h=document.querySelector(".js-gallery"),d=document.getElementById("tui-pagination-container"),E=document.querySelector(".js-search-form"),M=document.querySelector(".loader"),T={totalItems:0,itemsPerPage:12,visiblePages:5,page:1},n=new S(d,T),q=n.getCurrentPage();i.getPopularPhotos(q).then(t=>{const r=m(t.results);h.innerHTML=r,n.reset(t.total)}).catch(t=>{console.log(t),a.error({message:"Error"})});n.on("afterMove",w);E.addEventListener("submit",async t=>{t.preventDefault();const r=t.target.elements.query.value.trim();if(r===""){a.warning({message:"Enter photo name"});return}i.query=r,n.off("afterMove",w),n.off("afterMove",$),y();try{const e=await i.searchPhoto(q);if(e.results.length===0){a.info({message:"Not found photo"});return}e.total<=12?d.classList.add("visually-hidden"):d.classList.remove("visually-hidden"),a.success({message:`We found ${e.total}`});const o=m(e.results);h.innerHTML=o,n.reset(e.total)}catch(e){console.log(e),a.error({message:"Error"})}finally{f(),E.reset()}n.on("afterMove",$)});function w(t){const r=t.page;y(),i.getPopularPhotos(r).then(e=>{const o=m(e.results);h.innerHTML=o}).catch(e=>{console.log(e),a.error({message:"Error"})}).finally(()=>{f()})}function $(t){const r=t.page;y(),i.searchPhoto(r).then(e=>{const o=m(e.results);h.innerHTML=o}).catch(e=>{console.log(e),a.error({message:"Error"})}).finally(()=>{f()})}function y(){M.classList.remove("visually-hidden")}function f(){M.classList.add("visually-hidden")}h.addEventListener("click",t=>{if(t.target.nodeName!=="IMG")return;const r=t.target.closest("li").id;console.log(r)});
//# sourceMappingURL=commonHelpers.js.map
