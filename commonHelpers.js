var f=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)};var s=(e,t,r)=>(f(e,t,"read from private field"),r?r.call(e):t.get(e)),c=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},P=(e,t,r,o)=>(f(e,t,"write to private field"),o?o.call(e,r):t.set(e,r),r);import"./assets/styles-54b78044.js";import{a as v,P as w,i as a}from"./assets/vendor-6b9f6847.js";var l,p,u,g;class S{constructor(){c(this,l,"https://api.unsplash.com");c(this,p,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");c(this,u,"");c(this,g,new URLSearchParams({per_page:12,orientation:"portrait",client_id:s(this,p)}))}async getPopularPhotos(t){const r=`${s(this,l)}/search/photos?page=${t}&query=popular&${s(this,g)}`;try{const{data:o}=await v(r);return o}catch(o){console.log(o)}}async searchPhoto(t){const r=`${s(this,l)}/search/photos?page=${t}&query=${s(this,u)}&${s(this,g)}`;try{const{data:o}=await v(r);return o}catch(o){console.log(o)}}set query(t){P(this,u,t)}}l=new WeakMap,p=new WeakMap,u=new WeakMap,g=new WeakMap;function m(e){return e.map(({id:t,urls:{small:r},alt_description:o})=>`<li id="${t}" class="gallery__item"><img src="${r}" alt="${o}"></li>`).join("")}const i=new S,h=document.querySelector(".js-gallery"),_=document.getElementById("tui-pagination-container"),L=document.querySelector(".js-search-form"),$=document.querySelector(".loader"),T={totalItems:0,itemsPerPage:12,visiblePages:5,page:1},n=new w(_,T),M=n.getCurrentPage();i.getPopularPhotos(M).then(e=>{const t=m(e.results);h.innerHTML=t,n.reset(e.total)}).catch(e=>{console.log(e),a.error({message:"Error"})});n.on("afterMove",q);L.addEventListener("submit",async e=>{e.preventDefault();const t=e.target.elements.query.value.trim();if(t===""){a.warning({message:"Enter photo name"});return}i.query=t,n.off("afterMove",q),n.off("afterMove",E),d();try{const r=await i.searchPhoto(M);if(r.results.length===0){a.info({message:"Not found photo"});return}a.success({message:`We found ${r.total}`});const o=m(r.results);h.innerHTML=o,n.reset(r.total)}catch(r){console.log(r),a.error({message:"Error"})}finally{y(),L.reset()}n.on("afterMove",E)});function q(e){const t=e.page;d(),i.getPopularPhotos(t).then(r=>{const o=m(r.results);h.innerHTML=o}).catch(r=>{console.log(r),a.error({message:"Error"})}).finally(()=>{y()})}function E(e){const t=e.page;d(),i.searchPhoto(t).then(r=>{const o=m(r.results);h.innerHTML=o}).catch(r=>{console.log(r),a.error({message:"Error"})}).finally(()=>{y()})}function d(){$.classList.remove("visually-hidden")}function y(){$.classList.add("visually-hidden")}h.addEventListener("click",e=>{if(e.target.nodeName!=="IMG")return;const t=e.target.closest("li").id;console.log(t)});
//# sourceMappingURL=commonHelpers.js.map
