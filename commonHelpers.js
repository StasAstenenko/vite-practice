var y=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var n=(r,e,t)=>(y(r,e,"read from private field"),t?t.call(r):e.get(r)),p=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},f=(r,e,t,o)=>(y(r,e,"write to private field"),o?o.call(r,t):e.set(r,t),t);import"./assets/styles-54b78044.js";import{a as P,P as q,i as s}from"./assets/vendor-6b9f6847.js";var i,l,u;class M{constructor(){p(this,i,"https://api.unsplash.com");p(this,l,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");p(this,u,"")}async getPopularPhotos(e){const t=`${n(this,i)}/search/photos?page=${e}&query=popular&per_page=12&orientation=portrait&client_id=${n(this,l)}`;try{const{data:o}=await P(t);return o}catch(o){console.log(o)}}async searchPhoto(e){const t=`${n(this,i)}/search/photos?page=${e}&query=${n(this,u)}&per_page=12&orientation=portrait&client_id=${n(this,l)}`;try{const{data:o}=await P(t);return o}catch(o){console.log(o)}}set query(e){f(this,u,e)}}i=new WeakMap,l=new WeakMap,u=new WeakMap;function g(r){return r.map(e=>`<li id="${e.id}" class="gallery__item"><img src="${e.urls.small}" alt="${e.alt_description}"></li>`).join("")}const c=new M,h=document.querySelector(".js-gallery"),w=document.getElementById("tui-pagination-container"),v=document.querySelector(".js-search-form"),$=document.querySelector(".loader"),S={totalItems:0,itemsPerPage:12,visiblePages:5,page:1},a=new q(w,S),E=a.getCurrentPage();c.getPopularPhotos(E).then(r=>{const e=g(r.results);h.innerHTML=e,a.reset(r.total)}).catch(r=>{console.log(r),s.error({message:"Error"})});a.on("afterMove",_);v.addEventListener("submit",async r=>{r.preventDefault();const e=r.target.elements.query.value.trim();if(e===""){s.warning({message:"Enter photo name"});return}c.query=e,a.off("afterMove",_),a.off("afterMove",L),m();try{const t=await c.searchPhoto(E);if(t.results.length===0){s.info({message:"Not found photo"});return}s.success({message:`We found ${t.total}`});const o=g(t.results);h.innerHTML=o,a.reset(t.total)}catch(t){console.log(t),s.error({message:"Error"})}finally{d(),v.reset()}a.on("afterMove",L)});function _(r){const e=r.page;m(),c.getPopularPhotos(e).then(t=>{const o=g(t.results);h.innerHTML=o}).catch(t=>{console.log(t),s.error({message:"Error"})}).finally(()=>{d()})}function L(r){const e=r.page;m(),c.searchPhoto(e).then(t=>{const o=g(t.results);h.innerHTML=o}).catch(t=>{console.log(t),s.error({message:"Error"})}).finally(()=>{d()})}function m(){$.classList.remove("visually-hidden")}function d(){$.classList.add("visually-hidden")}
//# sourceMappingURL=commonHelpers.js.map
