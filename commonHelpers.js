var m=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)};var a=(r,e,t)=>(m(r,e,"read from private field"),t?t.call(r):e.get(r)),p=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},P=(r,e,t,o)=>(m(r,e,"write to private field"),o?o.call(r,t):e.set(r,t),t);import"./assets/styles-384ca9c8.js";import{a as y,P as v,i as n}from"./assets/vendor-6b9f6847.js";var i,l,u;class _{constructor(){p(this,i,"https://api.unsplash.com");p(this,l,"gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58");p(this,u,"")}async getPopularPhotos(e){const t=`${a(this,i)}/search/photos?page=${e}&query=popular&per_page=12&orientation=portrait&client_id=${a(this,l)}`;try{const{data:o}=await y(t);return o}catch(o){console.log(o)}}async searchPhoto(e){const t=`${a(this,i)}/search/photos?page=${e}&query=${a(this,u)}&per_page=12&orientation=portrait&client_id=${a(this,l)}`;try{const{data:o}=await y(t);return o}catch(o){console.log(o)}}set query(e){P(this,u,e)}}i=new WeakMap,l=new WeakMap,u=new WeakMap;function g(r){return r.map(e=>`<li id="${e.id}" class="gallery__item"><img src="${e.urls.small}" alt="${e.alt_description}"></li>`).join("")}const c=new _,h=document.querySelector(".js-gallery"),E=document.getElementById("tui-pagination-container"),M=document.querySelector(".js-search-form"),q={totalItems:0,itemsPerPage:12,visiblePages:5,page:1},s=new v(E,q),d=s.getCurrentPage();c.getPopularPhotos(d).then(r=>{const e=g(r.results);h.innerHTML=e,s.reset(r.total)}).catch(r=>{console.log(r),n.error({message:"Error"})});s.on("afterMove",$);M.addEventListener("submit",async r=>{r.preventDefault();const e=r.target.elements.query.value.trim();if(e===""){n.warning({message:"Enter photo name"});return}c.query=e,s.off("afterMove",$),s.off("afterMove",f);try{const t=await c.searchPhoto(d);if(t.results.length===0){n.info({message:"Not found photo"});return}n.success({message:`We found ${t.total}`});const o=g(t.results);h.innerHTML=o,s.reset(t.total)}catch(t){console.log(t)}s.on("afterMove",f)});function $(r){const e=r.page;c.getPopularPhotos(e).then(t=>{const o=g(t.results);h.innerHTML=o}).catch(t=>{console.log(t),n.error({message:"Error"})})}function f(r){const e=r.page;c.searchPhoto(e).then(t=>{const o=g(t.results);h.innerHTML=o}).catch(t=>{console.log(t),n.error({message:"Error"})})}
//# sourceMappingURL=commonHelpers.js.map
