{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/render_function.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = '';\n\n  async getPopularPhotos(page) {\n    const url = `${\n      this.#BASE_URL\n    }/search/photos?page=${page}&query=popular&per_page=12&orientation=portrait&client_id=${\n      this.#API_KEY\n    }`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async searchPhoto(page) {\n    const url = `${\n      this.#BASE_URL\n    }/search/photos?page=${page}&query=${this.#query}&per_page=12&orientation=portrait&client_id=${\n      this.#API_KEY\n    }`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n}\n","export function galleryTemplate(imgs) {\n  return imgs\n    .map(\n      img =>\n        `<li id=\"${img.id}\" class=\"gallery__item\"><img src=\"${img.urls.small}\" alt=\"${img.alt_description}\"></li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport { UnsplashAPI } from './UnsplashAPI';\nimport { galleryTemplate } from './render_function';\nimport Pagination from 'tui-pagination'; /* ES6 */\nimport 'tui-pagination/dist/tui-pagination.min.css';\n\nconst api = new UnsplashAPI();\nconst galleryList = document.querySelector('.js-gallery');\nconst container = document.getElementById('tui-pagination-container');\nconst form = document.querySelector('.js-search-form');\n\n\n\nconst options = { // below default value of options\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n}\nconst pagination = new Pagination(container, options);\n\nconst currentPage = pagination.getCurrentPage();\n\n\napi\n  .getPopularPhotos(currentPage)\n  .then(data => {\n    const markup = galleryTemplate(data.results);\n    galleryList.innerHTML = markup;\n    pagination.reset(data.total);\n  })\n  .catch(err => {\n    console.log(err);\n    iziToast.error({\n      message: 'Error',\n    });\n  });\n\npagination.on('afterMove', (event) => {\n    const currentPage = event.page;\n    api\n  .getPopularPhotos(currentPage)\n  .then(data => {\n    const markup = galleryTemplate(data.results);\n    galleryList.innerHTML = markup;\n  })\n  .catch(err => {\n    console.log(err);\n    iziToast.error({\n      message: 'Error',\n    });\n  }); \n});\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  const inputValue = e.target.elements.query.value.trim();\n\n  if (inputValue === '') {\n    iziToast.warning({\n      message: 'Enter photo name',\n    });\n    return;\n  };\n\n  api.query = inputValue;\n  try {\n    const data = await api.searchPhoto(currentPage);\n    const markup = galleryTemplate(data.results);\n    galleryList.innerHTML = markup;\n    pagination.reset(data.total);\n  } catch (err) {\n  console.log(err);\n  };\n\n\n});\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","url","__privateGet","data","axios","err","newQuery","__privateSet","galleryTemplate","imgs","img","api","galleryList","container","form","options","pagination","Pagination","currentPage","markup","iziToast","event","inputValue"],"mappings":"+bAEO,MAAMA,CAAY,CAAlB,cACLC,EAAA,KAAAC,EAAY,4BACZD,EAAA,KAAAE,EAAW,+CACXF,EAAA,KAAAG,EAAS,IAET,MAAM,iBAAiBC,EAAM,CAC3B,MAAMC,EAAM,GACVC,EAAA,KAAKL,EACX,uBAA2BG,CAAI,6DACzBE,EAAA,KAAKJ,EACX,GACI,GAAI,CACF,KAAM,CAAE,KAAAK,CAAM,EAAG,MAAMC,EAAMH,CAAG,EAChC,OAAOE,CACR,OAAQE,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACF,CAED,MAAM,YAAYL,EAAM,CACtB,MAAMC,EAAM,GACVC,EAAA,KAAKL,EACN,uBAAsBG,CAAI,UAAUE,EAAA,KAAKH,EAAM,+CAC9CG,EAAA,KAAKJ,EACX,GACI,GAAI,CACF,KAAM,CAAE,KAAAK,CAAM,EAAG,MAAMC,EAAMH,CAAG,EAChC,OAAOE,CACR,OAAQE,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CACF,CAED,IAAI,MAAMC,EAAU,CAClBC,EAAA,KAAKR,EAASO,EACf,CACH,CAnCET,EAAA,YACAC,EAAA,YACAC,EAAA,YCLK,SAASS,EAAgBC,EAAM,CACpC,OAAOA,EACJ,IACCC,GACE,WAAWA,EAAI,EAAE,qCAAqCA,EAAI,KAAK,KAAK,UAAUA,EAAI,eAAe,SACpG,EACA,KAAK,EAAE,CACZ,CCDA,MAAMC,EAAM,IAAIhB,EACViB,EAAc,SAAS,cAAc,aAAa,EAClDC,EAAY,SAAS,eAAe,0BAA0B,EAC9DC,EAAO,SAAS,cAAc,iBAAiB,EAI/CC,EAAU,CACd,WAAY,EACZ,aAAc,GACd,aAAc,EACd,KAAM,CACR,EACMC,EAAa,IAAIC,EAAWJ,EAAWE,CAAO,EAE9CG,EAAcF,EAAW,iBAG/BL,EACG,iBAAiBO,CAAW,EAC5B,KAAKf,GAAQ,CACZ,MAAMgB,EAASX,EAAgBL,EAAK,OAAO,EAC3CS,EAAY,UAAYO,EACxBH,EAAW,MAAMb,EAAK,KAAK,CAC/B,CAAG,EACA,MAAME,GAAO,CACZ,QAAQ,IAAIA,CAAG,EACfe,EAAS,MAAM,CACb,QAAS,OACf,CAAK,CACL,CAAG,EAEHJ,EAAW,GAAG,YAAcK,GAAU,CAClC,MAAMH,EAAcG,EAAM,KAC1BV,EACD,iBAAiBO,CAAW,EAC5B,KAAKf,GAAQ,CACZ,MAAMgB,EAASX,EAAgBL,EAAK,OAAO,EAC3CS,EAAY,UAAYO,CAC5B,CAAG,EACA,MAAMd,GAAO,CACZ,QAAQ,IAAIA,CAAG,EACfe,EAAS,MAAM,CACb,QAAS,OACf,CAAK,CACL,CAAG,CACH,CAAC,EAEDN,EAAK,iBAAiB,SAAU,MAAM,GAAK,CACzC,EAAE,eAAc,EAChB,MAAMQ,EAAa,EAAE,OAAO,SAAS,MAAM,MAAM,OAEjD,GAAIA,IAAe,GAAI,CACrBF,EAAS,QAAQ,CACf,QAAS,kBACf,CAAK,EACD,MAEJ,CACET,EAAI,MAAQW,EACZ,GAAI,CACF,MAAMnB,EAAO,MAAMQ,EAAI,YAAYO,CAAW,EACxCC,EAASX,EAAgBL,EAAK,OAAO,EAC3CS,EAAY,UAAYO,EACxBH,EAAW,MAAMb,EAAK,KAAK,CAC5B,OAAQE,EAAK,CACd,QAAQ,IAAIA,CAAG,CAEjB,CAEA,CAAC"}