{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/render_function.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = '';\n\n  async getPopularPhotos(page) {\n    const url = `${\n      this.#BASE_URL\n    }/search/photos?page=${page}&query=popular&per_page=12&orientation=portrait&client_id=${\n      this.#API_KEY\n    }`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async searchPhoto(page) {\n    const url = `${\n      this.#BASE_URL\n    }/search/photos?page=${page}&query=${this.#query}&per_page=12&orientation=portrait&client_id=${\n      this.#API_KEY\n    }`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n}\n","export function galleryTemplate(imgs) {\n  return imgs\n    .map(\n      img =>\n        `<li id=\"${img.id}\" class=\"gallery__item\"><img src=\"${img.urls.small}\" alt=\"${img.alt_description}\"></li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { UnsplashAPI } from './UnsplashAPI';\nimport { galleryTemplate } from './render_function';\nimport Pagination from 'tui-pagination'; /* ES6 */\nimport 'tui-pagination/dist/tui-pagination.min.css';\n\nconst api = new UnsplashAPI();\nconst galleryList = document.querySelector('.js-gallery');\nconst container = document.getElementById('tui-pagination-container');\nconst form = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.loader');\n\n\n\nconst options = { // below default value of options\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n}\nconst pagination = new Pagination(container, options);\n\nconst currentPage = pagination.getCurrentPage();\n\n\napi\n  .getPopularPhotos(currentPage)\n  .then(data => {\n    const markup = galleryTemplate(data.results);\n    galleryList.innerHTML = markup;\n    pagination.reset(data.total);\n  })\n  .catch(err => {\n    console.log(err);\n    iziToast.error({\n      message: 'Error',\n    });\n  });\n\npagination.on('afterMove', popular);\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const inputValue = e.target.elements.query.value.trim();\n\n  if (inputValue === '') {\n    iziToast.warning({\n      message: 'Enter photo name',\n    });\n    return;\n  };\n\n  api.query = inputValue;\n  pagination.off('afterMove', popular);\n  pagination.off('afterMove', byQuery);\n  showLoader();\n  try {\n    const data = await api.searchPhoto(currentPage);\n    if (data.results.length === 0) {\n      iziToast.info({\n        message: 'Not found photo',\n      });\n      return;\n    }\n    iziToast.success({\n      message: `We found ${data.total}`,\n    })\n    const markup = galleryTemplate(data.results);\n    galleryList.innerHTML = markup;\n    pagination.reset(data.total);\n  } catch (err) {\n    console.log(err);\n    iziToast.error({\n      message: 'Error',\n    });\n  } finally {\n    hideLoader();\n    form.reset();\n  };\n  pagination.on('afterMove', byQuery);\n});\n\nfunction popular(event) {\n  const currentPage = event.page;\n  showLoader()\n    api\n  .getPopularPhotos(currentPage)\n  .then(data => {\n    const markup = galleryTemplate(data.results);\n    galleryList.innerHTML = markup;\n  })\n  .catch(err => {\n    console.log(err);\n    iziToast.error({\n      message: 'Error',\n    });\n  }).finally(()=>{\n    hideLoader()\n  }); \n}\n\nfunction byQuery(event) {\n  const currentPage = event.page;\n  showLoader()\n    api\n  .searchPhoto(currentPage)\n  .then(data => {\n    const markup = galleryTemplate(data.results);\n    galleryList.innerHTML = markup;\n  })\n  .catch(err => {\n    console.log(err);\n    iziToast.error({\n      message: 'Error',\n    });\n  }).finally(()=>{\n    hideLoader()\n  }); ; \n}\n\nfunction showLoader() {\n  loader.classList.remove('visually-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('visually-hidden');\n}"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","page","url","__privateGet","data","axios","err","newQuery","__privateSet","galleryTemplate","imgs","img","api","galleryList","container","form","loader","options","pagination","Pagination","currentPage","markup","iziToast","popular","e","inputValue","byQuery","showLoader","hideLoader","event"],"mappings":"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"}