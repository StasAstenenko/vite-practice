{"version":3,"file":"commonHelpers.js","sources":["../src/js/UnsplashAPI.js","../src/js/render_function.js","../src/js/gallery.js"],"sourcesContent":["import axios from 'axios';\n\nexport class UnsplashAPI {\n  #BASE_URL = 'https://api.unsplash.com';\n  #API_KEY = 'gcevo00lZKvSMKLnZZJPKYS5xNbpbsP_4i6E-BVlG58';\n  #query = '';\n  #searchParams = new URLSearchParams({\n    per_page: 12,\n    orientation: 'portrait',\n    client_id: this.#API_KEY,\n  });\n\n  async getPopularPhotos(page) {\n    const url = `${this.#BASE_URL}/search/photos?page=${page}&query=popular&${\n      this.#searchParams\n    }`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async searchPhoto(page) {\n    const url = `${this.#BASE_URL}/search/photos?page=${page}&query=${\n      this.#query\n    }&${this.#searchParams}`;\n    try {\n      const { data } = await axios(url);\n      return data;\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  set query(newQuery) {\n    this.#query = newQuery;\n  }\n}\n","export function galleryTemplate(imgs) {\n  return imgs\n    .map(\n      ({ id, urls: { small }, alt_description }) =>\n        `<li id=\"${id}\" class=\"gallery__item\"><img src=\"${small}\" alt=\"${alt_description}\"></li>`\n    )\n    .join('');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { UnsplashAPI } from './UnsplashAPI';\nimport { galleryTemplate } from './render_function';\nimport Pagination from 'tui-pagination'; /* ES6 */\nimport 'tui-pagination/dist/tui-pagination.min.css';\n\nconst api = new UnsplashAPI();\nconst galleryList = document.querySelector('.js-gallery');\nconst container = document.getElementById('tui-pagination-container');\nconst form = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.loader');\n\nconst options = {\n  // below default value of options\n  totalItems: 0,\n  itemsPerPage: 12,\n  visiblePages: 5,\n  page: 1,\n};\nconst pagination = new Pagination(container, options);\n\nconst currentPage = pagination.getCurrentPage();\n\napi\n  .getPopularPhotos(currentPage)\n  .then(data => {\n    const markup = galleryTemplate(data.results);\n    galleryList.innerHTML = markup;\n    pagination.reset(data.total);\n  })\n  .catch(err => {\n    console.log(err);\n    iziToast.error({\n      message: 'Error',\n    });\n  });\n\npagination.on('afterMove', popular);\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n\n  const inputValue = e.target.elements.query.value.trim();\n\n  if (inputValue === '') {\n    iziToast.warning({\n      message: 'Enter photo name',\n    });\n    return;\n  }\n\n  api.query = inputValue;\n  pagination.off('afterMove', popular);\n  pagination.off('afterMove', byQuery);\n  showLoader();\n  try {\n    const data = await api.searchPhoto(currentPage);\n    if (data.results.length === 0) {\n      iziToast.info({\n        message: 'Not found photo',\n      });\n      return;\n    }\n    if (data.total <= 12) {\n      container.classList.add('visually-hidden');\n    } else {\n      container.classList.remove('visually-hidden');\n    }\n\n    iziToast.success({\n      message: `We found ${data.total}`,\n    });\n    const markup = galleryTemplate(data.results);\n    galleryList.innerHTML = markup;\n    pagination.reset(data.total);\n  } catch (err) {\n    console.log(err);\n    iziToast.error({\n      message: 'Error',\n    });\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n  pagination.on('afterMove', byQuery);\n});\n\nfunction popular(event) {\n  const currentPage = event.page;\n  showLoader();\n  api\n    .getPopularPhotos(currentPage)\n    .then(data => {\n      const markup = galleryTemplate(data.results);\n      galleryList.innerHTML = markup;\n    })\n    .catch(err => {\n      console.log(err);\n      iziToast.error({\n        message: 'Error',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nfunction byQuery(event) {\n  const currentPage = event.page;\n  showLoader();\n  api\n    .searchPhoto(currentPage)\n    .then(data => {\n      const markup = galleryTemplate(data.results);\n      galleryList.innerHTML = markup;\n    })\n    .catch(err => {\n      console.log(err);\n      iziToast.error({\n        message: 'Error',\n      });\n    })\n    .finally(() => {\n      hideLoader();\n    });\n}\n\nfunction showLoader() {\n  loader.classList.remove('visually-hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('visually-hidden');\n}\n\ngalleryList.addEventListener('click', e => {\n  if (e.target.nodeName !== 'IMG') return;\n  const id = e.target.closest('li').id;\n  console.log(id);\n});\n"],"names":["UnsplashAPI","__privateAdd","_BASE_URL","_API_KEY","_query","_searchParams","__privateGet","page","url","data","axios","err","newQuery","__privateSet","galleryTemplate","imgs","id","small","alt_description","api","galleryList","container","form","loader","options","pagination","Pagination","currentPage","markup","iziToast","popular","e","inputValue","byQuery","showLoader","hideLoader","event"],"mappings":"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"}